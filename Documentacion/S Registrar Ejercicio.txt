title IU5 Registrar Nuevo Ejercicio 

actor Usuario

participant MenuRutina
participant App.js

participant ViewRenderer
participant RegistrarEjercicio
participant React
participant Firestore


App.js -> ViewRenderer: <ViewRenderer currentView={"RegistrarEjercicio"} \n setCurrentView={setCurrentView}\n  currentUser={currentUser}\n  handleSignOut={handleSignOut}\n  error={error}\n  setError={setError}\n/>\nViewRenderer.jsx->Login.jsx:<login {\n    setCurrentView,\n    currentUser,\n    handleSignOut,\n    error,\n    setError,\n  } />\n


RegistrarEjercicio->React:useState("")
React-->RegistrarEjercicio:[nombre, setNombre]

RegistrarEjercicio->React:useState("")
React-->RegistrarEjercicio:[musculo, setMusculo]

RegistrarEjercicio->React:useState("")
React-->RegistrarEjercicio:[pesoMaximo, setPesoMaximo]

RegistrarEjercicio->React:useState("")
React-->RegistrarEjercicio:[repeticionesMaximas, setRepeticionesMaximas]

RegistrarEjercicio->React:useState("")
React-->RegistrarEjercicio:[setsMaximos, setSetsMaximos]

RegistrarEjercicio->React:useState("")
React-->RegistrarEjercicio:[descripcion, setDescripcion]

RegistrarEjercicio->React:useState(false)
React-->RegistrarEjercicio:[loading, setLoading]

RegistrarEjercicio->React:useState([])
React-->RegistrarEjercicio:[ejerciciosExistentes, setEjerciciosExistentes]

RegistrarEjercicio->React:useEffect(() => cargarEjerciciosExistentes(), [])
React-->RegistrarEjercicio:cargarEjerciciosExistentes()

RegistrarEjercicio->Firestore:getDocs(collection(db, "ejercicios"))
Firestore-->RegistrarEjercicio:ejerciciosSnapshot

RegistrarEjercicio->React:setEjerciciosExistentes(ejerciciosList)
RegistrarEjercicio<--React:return

RegistrarEjercicio-->Usuario:Muestra formulario con:\n- Info ejercicios existentes\n- Campos del formulario\n- Botones de acción
Usuario->RegistrarEjercicio:Ingresa nombre "Press de Banca"
RegistrarEjercicio->React:setNombre("Press de Banca")
React-->RegistrarEjercicio:return

Usuario<--RegistrarEjercicio:Muestra formulario actualizado
Usuario->RegistrarEjercicio:Selecciona músculo "Pecho"
RegistrarEjercicio->React:setMusculo("Pecho")
React-->RegistrarEjercicio:return

Usuario<--RegistrarEjercicio:Muestra formulario actualizado
Usuario->RegistrarEjercicio:Ingresa peso máximo "80"
RegistrarEjercicio->React:setPesoMaximo("80")
React-->RegistrarEjercicio:return

Usuario<--RegistrarEjercicio:Muestra formulario actualizado
Usuario->RegistrarEjercicio:Ingresa repeticiones "10"
RegistrarEjercicio->React:setRepeticionesMaximas("10")
React->RegistrarEjercicio:Re-render

Usuario->RegistrarEjercicio:Ingresa sets "4"
RegistrarEjercicio->React:setSetsMaximos("4")
React-->RegistrarEjercicio:return


Usuario->RegistrarEjercicio:Click "Registrar Ejercicio"


alt Validación exitosa
    RegistrarEjercicio->React:setLoading(true)
    React-->RegistrarEjercicio:return
    
    
    RegistrarEjercicio-->Usuario:Alert "¡Ejercicio registrado con éxito!"
    
    
    RegistrarEjercicio-->Usuario:Muestra confirmación
    
    alt Usuario cancela
        Usuario->RegistrarEjercicio:Click Cancelar
        RegistrarEjercicio->React:setCurrentView("menuRutina")
        ViewRenderer<--React:return
        
        ==ir inicio index==
    else Usuario acepta
        Usuario->RegistrarEjercicio:Click OK
React<--RegistrarEjercicio:setCurrentView("menuRutina")
ViewRenderer<--React:return
  ==ir inicio index==

    end
    
end


alt Navegación

    
    opt Regresar
        Usuario->RegistrarEjercicio:Click "Regresar"
        RegistrarEjercicio->React:setCurrentView("menuRutina")
ViewRenderer<--React:return
  ==ir inicio index==
    end
end
